from django.shortcuts import render
from django.http import HttpResponse
import os,sys
from django.http import HttpResponseRedirect


def loadForm(request):
	return render(request, "form2.html", {})

def uploadFileToPredict(request):
	def process(f, malw=True):	
		url = "./Predicts/file_"
		with open(url + str(count) + '.exe', 'wb+') as destination:
			for chunk in f.chunks():
				destination.write(chunk)

	for count, x in enumerate(request.FILES.getlist("files")):
		process(x, True)

	return HttpResponseRedirect('/predict/predict/')


def predict(request):
	from WMD import WMD
	trace = WMD().predict()
	#return HttpResponse(trace)
	return render(request, "predictReport.html", {'trace':trace})